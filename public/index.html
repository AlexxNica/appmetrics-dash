<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/style2.css" title="Light background">
<link rel="alternate stylesheet" type="text/css" href="css/style.css" title="Dark background">

<head>
    <title>Application Metrics Dashboard for Node.js (Tech Preview)</title>
</head>

<body>
    <h1>Application Metrics Dashboard for Node.js (Tech Preview)</h1>
    <!-- load the d3.js library -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>    
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/gauge.js"></script>

    <div class="row">
        <div class="col-md-3" id="cpuDiv1"></div>
        <div class="col-md-3" id="memDiv1"></div>
        <div class="col-md-3" id="gcDiv"></div>
        <div class="col-md-3" id="envDiv"></div>
    </div>

    <div class="row">
        <div class="col-md-5" id="httpDiv1"></div>
        <div class="col-md-5" id="httpDiv3"></div>
        <div class="col-md-2" id="httpDiv2"></div>
    </div>
    <div class="row">
        <div class="col-md-5" id="httpOBDiv"></div>
        <div class="col-md-5" id="eventLoopDiv"></div>
        <div class="col-md-2" id="nodeReportButtonDiv"></div>
    </div>
<script>
    // Initialise graph and canvas dimensions
    var margin = {
         top: 120,
         shortTop: 60,
         right: 20,
         bottom: 30,
         left: 60
    },
    canvasWidth = $("#cpuDiv1").width(),
    httpCanvasWidth = $("#httpDiv1").width(),
    graphWidth = canvasWidth - margin.left - margin.right,
    httpGraphWidth = httpCanvasWidth - margin.left - margin.right,
    canvasHeight = 300,
    tallerGraphHeight = 300 - margin.shortTop - margin.bottom,
    graphHeight = canvasHeight - margin.top - margin.bottom;
     
    var myurl = location.host;
    var socket = io.connect(myurl);
    socket.emit('connected');
    socket.emit('disableprofiling'); //profiling disabled
</script>
    <script type="text/javascript" src="js/nodeReport.js"></script>
    <script type="text/javascript" src="js/gauge.js"></script>
    <script type="text/javascript" src="js/envTable.js"></script>

    <script type="text/javascript" src="js/cpuChart.js"></script>
    
    <script type="text/javascript" src="js/httpRequestsChart.js"></script>
    <script type="text/javascript" src="js/httpThroughPutChart.js"></script>
    <script type="text/javascript" src="js/httpTop5.js"></script>
    <script type="text/javascript" src="js/httpOutboundRequestsChart.js"></script>
	
	<script type="text/javascript" src="js/memChart.js"></script>
    <script type="text/javascript" src="js/gcChart.js"></script>
    <script type="text/javascript" src="js/eventLoopChart.js"></script>
    
    <script>
        window.addEventListener('resize', resize); 

        function resize() {
            canvasWidth = $("#cpuDiv1").width(),
            httpCanvasWidth = $("#httpDiv1").width(),
            graphWidth = canvasWidth - margin.left - margin.right,
            httpGraphWidth = httpCanvasWidth - margin.left - margin.right;
            resizeCPUChart();
            resizeHttpChart();
            resizeHttpOBChart();
            resizeGCChart();
            resizeEventLoopChart();
            resizeHttpThroughputChart();
            resizeHttpTop5Chart();
            resizeMemChart();
        }

    </script>

</body>

</html>
